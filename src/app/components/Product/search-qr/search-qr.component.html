<main id="main" class="main">
  <section class="section">
    <div class="card">
      <div class="card-body">
        <form [formGroup]="qrForm" (ngSubmit)="onSubmit(qrForm.value)" class="mt-4">
          <div class="form-row">
            <div class="form-group col-md-12 mb-3">
              <div class="input-group">
                <input pInputText placeholder="{{this.currentSearchTarget=='product' ? 'Barkod':  'Raf'}}" type="search"
                  id="barcode" class="form-control" formControlName="barcode" />
                <div class="input-group-append">
                  <button class="btn btn-primary" type="submit" style="height: 100%">
                    <i class="fa fa-search" aria-hidden="true"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>

    <p-table *ngIf="_products.length>0" [value]="_products" [paginator]="true" [rows]="10"
      [tableStyle]="{'min-width': '50rem'}" [responsiveLayout]="'scroll'">

      <ng-template pTemplate="caption">
        <div class="p-4 card-body d-flex justify-content-start" style="overflow-x: auto">
          <p-splitButton label="İşlemler" [model]="items" appendTo="body" />
        </div>

      </ng-template>
      <!-- Table Headers with Sorting -->
      <ng-template pTemplate="header">
        <tr>
          <th>
            <!-- Filter is not needed for Id or Resim columns -->
          </th>
          <th></th>
          <th>
            <p-columnFilter type="text" field="itemCode" [showClearButton]="true"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="description" [showClearButton]="true"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="colorCode" [showClearButton]="true"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="itemDim1Code" [showClearButton]="true"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="shelfNo" [showClearButton]="true"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="numeric" field="quantity" [showClearButton]="true"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="text" field="barcode" [showClearButton]="true"></p-columnFilter>
          </th>
          <th>
            <p-columnFilter type="numeric" field="price" [showClearButton]="true"></p-columnFilter>
          </th>
        </tr>
        <tr>
          <th pSortableColumn="id">
            Id
            <p-sortIcon field="id"></p-sortIcon>
          </th>
          <th>
            Resim
          </th>
          <th pSortableColumn="itemCode">
            Ürün Kodu
            <p-sortIcon field="itemCode"></p-sortIcon>
          </th>
          <th pSortableColumn="description">
            Ürün Adı
            <p-sortIcon field="description"></p-sortIcon>
          </th>
          <th pSortableColumn="colorCode">
            Renk
            <p-sortIcon field="colorCode"></p-sortIcon>
          </th>
          <th pSortableColumn="itemDim1Code">
            Beden
            <p-sortIcon field="itemDim1Code"></p-sortIcon>
          </th>
          <th pSortableColumn="shelfNo">
            Raf No
            <p-sortIcon field="shelfNo"></p-sortIcon>
          </th>
          <th pSortableColumn="quantity">
            Toplam Stok
            <p-sortIcon field="quantity"></p-sortIcon>
          </th>
          <th pSortableColumn="barcode">
            Barkod
            <p-sortIcon field="barcode"></p-sortIcon>
          </th>
          <th pSortableColumn="price">
            Satış Fiyatı
            <p-sortIcon field="price"></p-sortIcon>
          </th>
        </tr>
      </ng-template>



      <!-- Table Body -->
      <ng-template pTemplate="body" let-product let-i="rowIndex">
        <tr>
          <td>{{ i + 1 }}</td>
          <td>
            <p-image src="{{ product.photoUrl }}" alt="Image" width="30" [preview]="true"></p-image>
          </td>
          <td>{{ product.itemCode }}</td>
          <td>{{ product.description }}</td>
          <td>{{ product.colorCode }}</td>
          <td>{{ product.itemDim1Code }}</td>
          <td>{{ product.shelfNo }}</td>
          <td>{{ product.quantity }}</td>
          <td>{{ product.barcode }}</td>
          <td>{{ product.price }}</td>
        </tr>
      </ng-template>

    </p-table>


  </section>
</main>
