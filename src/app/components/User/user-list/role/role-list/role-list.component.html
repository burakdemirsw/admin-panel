<main id="main" class="main">
  <section class="section">
    <div>
      <div class="card">

        <div class="card-body p-4">
          <button class="btn btn-success" status="success" (click)="showDialog2(true)">
            Rol Ekle
          </button>
        </div>
      </div>
      <div>

      </div>
    </div>

    <div class="card">
      <p-table [tableStyle]="{ 'min-width': '20rem' }" [value]="roles" class="table table-striped" [paginator]="true"
        [rows]="10" [responsiveLayout]="'scroll'">
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="id">
              Id
              <p-sortIcon field="id"></p-sortIcon>
              <p-columnFilter field="id" matchMode="contains"></p-columnFilter>
            </th>
            <th pSortableColumn="roleName">
              Rol
              <p-sortIcon field="roleName"></p-sortIcon>
              <p-columnFilter field="roleName" matchMode="contains"></p-columnFilter>
            </th>
            <th>İşlemler</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-role let-i="index">
          <tr>
            <td>{{ role.id }}</td>
            <td>{{ role.roleName }}</td>
            <td>

              <div class="btn-group" role="group" aria-label="Basic example">
                <button class="btn btn-success" (click)="openModalForRole(role)">
                  <i class="fa-solid fa-bars"></i>
                </button>
                <button class="btn btn-primary" (click)="updateRoleModal(role)">
                  <i class="fa-solid fa-pencil"></i>
                </button>
                <button class="btn btn-danger" (click)="deleteRole(role.id)">
                  <i class="fa-solid fa-trash"></i>
                </button>
              </div>

            </td>
          </tr>
        </ng-template>
      </p-table>

    </div>

    <p-dialog header="{{ roleModel ? 'Rol Güncelle' : 'Rol Ekle' }}" [(visible)]="visible" [style]="{ width: '50vw' }">
      <div class="dialog-content">
        <form [formGroup]="roleForm" (ngSubmit)="submitForm(roleForm.value)">
          <div class="form-group">
            <label for="roleName" class="label">Rol*</label>
            <input pInputText type="text" fullWidth id="roleName" placeholder="Rol" formControlName="roleName" />
          </div>

          <div class="button-row">
            <button pButton pRipple class="p-button-success" status="success">
              {{ roleModel ? "Rolü Güncelle" : "Rol Ekle" }}
            </button>
          </div>
        </form>
      </div>
    </p-dialog>

    <p-dialog header="{{ listHeader }} Kullanıcısına Panel Ata" [(visible)]="visible2"
      [style]="{ width: '80vw' ,height:'65%'}">
      <div class="dialog-content">
        <div class="card flex justify-content-center">
          <p-listbox #ms scrollHeight="300px" [options]="listItems" [(ngModel)]="selectedItems" optionLabel="label"
            [virtualScroll]="true" [filter]="true" [virtualScrollItemSize]="50" [multiple]="true" [checkbox]="true"
            [showToggleAll]="false" [metaKeySelection]="false" [showToggleAll]="true"
            (onSelectAllChange)="onSelectAllChange($event)">
          </p-listbox>
        </div>
        <nb-card>
          <nb-card-body>
            <button pButton pRipple label="Seçili Rolleri Kaydet" class="p-button-success"
              (click)="assignMenuInfoToRole()"></button>
          </nb-card-body>
        </nb-card>
      </div>
    </p-dialog>
  </section>
</main>
